<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SEC SVG APP</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="icon" href="./wolfversion3.png" />
	<style>
		h1{
			text-align: center;
		}
		.form{
			padding: 50px 100px 50px;
		}
		button{
			margin-top: 20px;
		}
		.app{
			margin-top: 50px;
		}
		.svg-img-wrapper,
		.introduce, #result{
			padding: 50px;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
		}
		.introduce__title{
			text-align: center;
		}
		.list{
			padding: 0;
			margin: 0 auto;
		}
		.button-group{
			margin-top: 20px;
		}
		.button-group .btn {
			margin-right: 10px;
		}.nav-link:hover{
			color: aqua!important;
		}
	</style>
</head>
<body>
	<header>
		<nav class="navbar navbar-dark bg-dark">
  		<div class="container">
    		<a class="navbar-brand" href="https://tranhuyducseven.github.io/readSVG/">
      			<img src="./wolfversion3.png" alt=""  height="50" style="border-radius:50%">
    		</a>
    		<ul class="navbar-nav">
	        	<li class="nav-item">	        		
	          		<a class="nav-link active" target="blank"  href="https://www.facebook.com/tranhuyducseven/">
	          			<i class="fab fa-facebook"></i>
	          			Facebook
	          		</a>
	        	</li>
	        	<li class="nav-item">
    			
	          		<a class="nav-link active" target="blank" href="https://github.com/tranhuyducseven">
	          			<i class="fab fa-github"></i>
	          			Github
	          		</a>
	        	</li>
        	</ul>
  		</div>
		</nav>
	</header>
	<div class="app">

		<h1> Simple extract the coordinates of SVG app</h1>
		<div class="introduce">
			<h3 class="introduce__title">Hướng dẫn sử dụng</h3>
			<ol class="list">
				<li>
					Upload file từ local

				</li>
				<li>
					Bấm <b>Submit</b>
					
				</li>
				<li>
					Bấm <b>Get</b>
					
				</li>
				<li>
					Dán kết quả ra Word
					
				</li>
				<li>
					Xuất ra csv rồi chạy trong Matlab
					
				</li>
			</ol>
		</div>
		<div class="form">
			<form>
			  <div class="form-group">
			    <label for="svg">SVG file:</label>
			    <input type="file" accept="image/*.svg" class="form-control" id="svg-input"  placeholder="Upload your svg file">
			    
			  </div>
			  <div class="form-group button-group">
			  	<div id="submit"  class="btn btn-primary">Submit</div>
			  <div id="get-result__btn"  class="btn btn-success">Get</div>
			  </div>
			  
		</form>
		</div>
	<div class="svg-img-wrapper">
		<img id="svg-img"src="" alt="">
	</div>
	
	<div id="result">
		
	<div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>	
	$(document).ready(function() {
		$('#submit').click(function(){
		event.preventDefault();	
		const inputElement = document.querySelector('#svg-input');
  		const [file] = inputElement.files;
  		const imgElement = document.querySelector('#svg-img');
  		if (file) {
    		imgElement.src = URL.createObjectURL(file);
    			fetch(imgElement.src)
    			.then(res=>res.text())
    			.then(data=>{
    				const parser = new DOMParser();
    				const svg = parser.parseFromString(data, 'image/svg+xml').querySelector('svg');
    				if (imgElement.id) svg.id = imgElement.id+'-clone';
      				if (imgElement.className) svg.classList = imgElement.classList;
      				imgElement.parentNode.replaceChild(svg, imgElement);

    			})
    			.catch(error=>console.error(error));

    		
  			}		
		})
		$('#get-result__btn').click(function(){
			const resultElement = document.querySelector('#result');
			const path = document.querySelector('path');
			const length = path.getTotalLength();
			console.log(path);
			const step = length / 100;
			const svgSet = []
			for (let i = 0; i<length; i += step) {
				const result = {x: path.getPointAtLength(i).x, y:path.getPointAtLength(i).y}
			    svgSet.push(result);
			}
			
			let tableHTML = "<table class='table'><tr><th>id</th><th>X</th><th>Y</th></tr>"
			const stringData =  svgSet.map((item, index)=>{
				return (`<tr>
					    <td>${index}</td>
					    <td>${item.x}</td>
					    <td>${item.y}</td>
					  </tr>`
					);
			});
			tableHTML+=stringData;
			resultElement.innerHTML = tableHTML;
			
		})

	});
	

	
</script>
</body>

</html>